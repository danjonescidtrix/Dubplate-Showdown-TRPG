/*!
 * Dubplate-Showdown-TRPG
 * 
 * 
 * @author Dan Jones
 * @version 1.0.5
 * Copyright 2017. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){"use strict";function e(e,a){console.log("Round: "+l),d=0,u=1,console.log(o),console.log(c),n(e,a,o,c);var s=["attackMove","defenceMove"],i=s[Math.floor(Math.random()*s.length)];switch(i){case"attackMove":var h=[];Object.keys(c.attacks).forEach(function(e,a){h.push(e)});for(var m=t(h),r=m.length,g=0;g<r;g++){var k=m[g];if(c.dubRage>=o.attacks[k].dubRageRequired){e=k,n(e,a,c,o);break}}break;case"defenceMove":console.log(c.name+" uses defence.")}o.dubRage+=20,c.dubRage+=20,console.log("Round Finished"),console.log("--------------"),l++,d=1,u=0}function a(e,a){return Math.floor(Math.random()*(a-e+1)+e)}function t(e){for(var a=e.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),n=e[a];e[a]=e[t],e[t]=n}return e}function n(e,t,n,o){var c,l,d,u,s;e&&(c=n.attacks[e].attack[0],l=n.attacks[e].attack[1],s=a(c,l),d=n.attacks[e].name,u=n.attacks[e].dubRageRequired,o.health-=s,n.dubRage-=u,document.getElementById("p1_health").innerHTML=n.health,document.getElementById("p2_health").innerHTML=o.health,console.log(n.name+" uses "+d),console.log(n.name+" does "+s+" damage to "+o.name),console.log(o.name+" health is now "+o.health)),t&&(s=0),console.log(n.name+" turn over"),console.log(""),o.health<=0&&console.log(o.name+" is dead, game over... "+n.name+" won!")}var o,c,l=1,d=1,u=0,s={Simula:{name:"Simula",health:100,attacks:{defaultAttack:{name:"Standard Attack",attack:[10,14],dubRageRequired:0},special1:{name:"Nasssty frog synths",attack:[25,30],dubRageRequired:50}},dubRage:0},Noisia:{name:"Noisia",health:300,attacks:{defaultAttack:{name:"Standard Attack",attack:[10,14],dubRageRequired:0},special1:{name:"Diplodoucus",attack:[25,30],dubRageRequired:100}},dubRage:0}};o=s.Simula,c=s.Noisia,document.getElementById("p1_name").innerHTML=o.name,document.getElementById("p2_name").innerHTML=c.name,document.getElementById("p1_health").innerHTML=o.health,document.getElementById("p2_health").innerHTML=c.health,document.getElementById("defaultAttack").onclick=function(){1===d&&e("defaultAttack","")},document.getElementById("special1").onclick=function(){1===d&&(o.dubRage>=o.attacks.special1.dubRageRequired?e("special1",""):console.log("You dont have enough Dub Rage for this move."))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdFJvdW5kIiwiYXR0YWNrTW92ZSIsImRlZmVuY2VNb3ZlIiwiY29uc29sZSIsImxvZyIsIlJPVU5EIiwiUDFfVFVSTiIsIlAyX1RVUk4iLCJQMSIsIlAyIiwicGxheU1vdmVQbGF5ZXIiLCJtb3ZlQXJyYXkiLCJtb3ZlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiYXR0YWNrQXJyYXkiLCJPYmplY3QiLCJrZXlzIiwiYXR0YWNrcyIsImZvckVhY2giLCJrZXkiLCJpbmRleCIsInB1c2giLCJzaHVmZmxlQXR0YWNrQXJyYXkiLCJzaHVmZmxlQXJyYXkiLCJhcnJheUxlbmd0aCIsImkiLCJ0aGlzRnJvbVNodWZmbGUiLCJkdWJSYWdlIiwiZHViUmFnZVJlcXVpcmVkIiwibmFtZSIsInJhbmRvbUJldHdlZW4iLCJtaW4iLCJtYXgiLCJhcnJheSIsImoiLCJ0ZW1wIiwiYXR0YWNrZXIiLCJkZWZlbmRlciIsImF0dGFja01pbiIsImF0dGFja01heCIsIm1vdmVOYW1lIiwiZGFtYWdlIiwiYXR0YWNrIiwiaGVhbHRoIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJjaGFyYWN0ZXJzIiwiU2ltdWxhIiwiZGVmYXVsdEF0dGFjayIsInNwZWNpYWwxIiwiTm9pc2lhIiwib25jbGljayJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQUEsU0FBQUMsaUJBQUEsbUJBQUEsV0FFQSxZQStFQSxTQUFBQyxHQUFBQyxFQUFBQyxHQUdBQyxRQUFBQyxJQUFBLFVBQUFDLEdBQ0FDLEVBQUEsRUFDQUMsRUFBQSxFQUNBSixRQUFBQyxJQUFBSSxHQUNBTCxRQUFBQyxJQUFBSyxHQUdBQyxFQUFBVCxFQUFBQyxFQUFBTSxFQUFBQyxFQUdBLElBQUFFLElBQUEsYUFBQSxlQUNBQyxFQUFBRCxFQUFBRSxLQUFBQyxNQUFBRCxLQUFBRSxTQUFBSixFQUFBSyxR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RUFBQXVCLEtBQ0FsQyxTQUFBaUQsZUFBQSxhQUFBQyxVQUFBeEMsRUFBQXNDLE9BQ0FoRCxTQUFBaUQsZUFBQSxhQUFBQyxVQUFBdkMsRUFBQXFDLE9BRUFoRCxTQUFBaUQsZUFBQSxpQkFBQU8sUUFBQSxXQUNBLElBQUFoRCxHQUNBTixFQUFBLGdCQUFBLEtBSUFGLFNBQUFpRCxlQUFBLFlBQUFPLFFBQUEsV0FDQSxJQUFBaEQsSUFDQUUsRUFBQXNCLFNBQUF0QixFQUFBWSxRQUFBZ0MsU0FBQXJCLGdCQUNBL0IsRUFBQSxXQUFBLElBRUFHLFFBQUFDLElBQUEiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL29wZW5zIHRoZSBidW5kbGVcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG5cclxuICAvLy0tLS0gR0xPQkFMUyAtLS0tXHJcbiAgdmFyIFJPVU5EID0gMTtcclxuICB2YXIgUDE7XHJcbiAgdmFyIFAxX1RVUk4gPSAxO1xyXG4gIHZhciBQMjtcclxuICB2YXIgUDJfVFVSTiA9IDA7XHJcblxyXG4gIHZhciBjaGFyYWN0ZXJzID0ge1xyXG4gICAgU2ltdWxhOiB7XHJcbiAgICAgIG5hbWU6ICdTaW11bGEnLFxyXG4gICAgICBoZWFsdGg6IDEwMCxcclxuICAgICAgYXR0YWNrczoge1xyXG4gICAgICAgIGRlZmF1bHRBdHRhY2s6IHtcclxuICAgICAgICAgIG5hbWU6ICdTdGFuZGFyZCBBdHRhY2snLFxyXG4gICAgICAgICAgYXR0YWNrOiBbXHJcbiAgICAgICAgICAgIDEwLCAxNFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGR1YlJhZ2VSZXF1aXJlZDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3BlY2lhbDE6IHtcclxuICAgICAgICAgIG5hbWU6ICdOYXNzc3R5IGZyb2cgc3ludGhzJyxcclxuICAgICAgICAgIGF0dGFjazogW1xyXG4gICAgICAgICAgICAyNSwgMzBcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBkdWJSYWdlUmVxdWlyZWQ6IDUwXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBkdWJSYWdlOiAwLFxyXG4gICAgfSxcclxuICAgIE5vaXNpYToge1xyXG4gICAgICBuYW1lOiAnTm9pc2lhJyxcclxuICAgICAgaGVhbHRoOiAzMDAsXHJcbiAgICAgIGF0dGFja3M6IHtcclxuICAgICAgICBkZWZhdWx0QXR0YWNrOiB7XHJcbiAgICAgICAgICBuYW1lOiAnU3RhbmRhcmQgQXR0YWNrJyxcclxuICAgICAgICAgIGF0dGFjazogW1xyXG4gICAgICAgICAgICAxMCwgMTRcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBkdWJSYWdlUmVxdWlyZWQ6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNwZWNpYWwxOiB7XHJcbiAgICAgICAgICBuYW1lOiAnRGlwbG9kb3VjdXMnLFxyXG4gICAgICAgICAgYXR0YWNrOiBbXHJcbiAgICAgICAgICAgIDI1LCAzMFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGR1YlJhZ2VSZXF1aXJlZDogMTAwXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBkdWJSYWdlOiAwLFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIFAxID0gY2hhcmFjdGVycy5TaW11bGE7XHJcbiAgUDIgPSBjaGFyYWN0ZXJzLk5vaXNpYTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3AxX25hbWUnKS5pbm5lckhUTUwgPSBQMS5uYW1lO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwMl9uYW1lJykuaW5uZXJIVE1MID0gUDIubmFtZTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncDFfaGVhbHRoJykuaW5uZXJIVE1MID0gUDEuaGVhbHRoO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwMl9oZWFsdGgnKS5pbm5lckhUTUwgPSBQMi5oZWFsdGg7XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWZhdWx0QXR0YWNrJykub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKFAxX1RVUk4gPT09IDEpIHtcclxuICAgICAgaW5pdFJvdW5kKCdkZWZhdWx0QXR0YWNrJywgJycpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWFsMScpLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChQMV9UVVJOID09PSAxKSB7XHJcbiAgICAgIGlmIChQMS5kdWJSYWdlID49IFAxLmF0dGFja3Muc3BlY2lhbDEuZHViUmFnZVJlcXVpcmVkKSB7XHJcbiAgICAgICAgaW5pdFJvdW5kKCdzcGVjaWFsMScsICcnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnWW91IGRvbnQgaGF2ZSBlbm91Z2ggRHViIFJhZ2UgZm9yIHRoaXMgbW92ZS4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGluaXRSb3VuZChhdHRhY2tNb3ZlLCBkZWZlbmNlTW92ZSkge1xyXG5cclxuICAgIC8vaW5pdCByb3VuZFxyXG4gICAgY29uc29sZS5sb2coJ1JvdW5kOiAnICsgUk9VTkQpO1xyXG4gICAgUDFfVFVSTiA9IDA7XHJcbiAgICBQMl9UVVJOID0gMTtcclxuICAgIGNvbnNvbGUubG9nKFAxKTtcclxuICAgIGNvbnNvbGUubG9nKFAyKTtcclxuXHJcbiAgICAvL3BsYXllcnMgbW92ZVxyXG4gICAgcGxheU1vdmVQbGF5ZXIoYXR0YWNrTW92ZSwgZGVmZW5jZU1vdmUsIFAxLCBQMik7XHJcblxyXG4gICAgLy9ib3QncyBtb3ZlXHJcbiAgICB2YXIgbW92ZUFycmF5ID0gWydhdHRhY2tNb3ZlJywgJ2RlZmVuY2VNb3ZlJ107XHJcbiAgICB2YXIgbW92ZSA9IG1vdmVBcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtb3ZlQXJyYXkubGVuZ3RoKV07XHJcblxyXG4gICAgc3dpdGNoIChtb3ZlKSB7XHJcbiAgICAgIGNhc2UgJ2F0dGFja01vdmUnOlxyXG4gICAgICAgIHZhciBhdHRhY2tBcnJheSA9IFtdO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKFAyLmF0dGFja3MpLmZvckVhY2goZnVuY3Rpb24oa2V5LCBpbmRleCkge1xyXG4gICAgICAgICAgYXR0YWNrQXJyYXkucHVzaChrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vcmFuZG9taXplIGF0dGFja0FycmF5IHRvIG5ldyBhcnJhY3lcclxuICAgICAgICB2YXIgc2h1ZmZsZUF0dGFja0FycmF5ID0gc2h1ZmZsZUFycmF5KGF0dGFja0FycmF5KTtcclxuICAgICAgICB2YXIgYXJyYXlMZW5ndGggPSBzaHVmZmxlQXR0YWNrQXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIC8vbG9vcCBhcnJheSwgY2hlY2sgZHVicmVxdWlyZWQgdnMgUDIgZHViUmFnZVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdmFyIHRoaXNGcm9tU2h1ZmZsZSA9IHNodWZmbGVBdHRhY2tBcnJheVtpXTtcclxuICAgICAgICAgIC8vaWYgYXR0YWNrJ3MgZHViIHJhZ2UgYXZhaWxhYmxlLCB1c2UgdGhpcyBhdGFjaywgZWxzZSBrZWVwIGxvb3BpbmdcclxuICAgICAgICAgIGlmIChQMi5kdWJSYWdlID49IFAxLmF0dGFja3NbdGhpc0Zyb21TaHVmZmxlXS5kdWJSYWdlUmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgYXR0YWNrTW92ZSA9IHRoaXNGcm9tU2h1ZmZsZTtcclxuICAgICAgICAgICAgcGxheU1vdmVQbGF5ZXIoYXR0YWNrTW92ZSwgZGVmZW5jZU1vdmUsIFAyLCBQMSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZGVmZW5jZU1vdmUnOlxyXG4gICAgICAgIGNvbnNvbGUubG9nKFAyLm5hbWUgKyBcIiB1c2VzIGRlZmVuY2UuXCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgUDEuZHViUmFnZSArPSAyMDtcclxuICAgIFAyLmR1YlJhZ2UgKz0gMjA7XHJcbiAgICBjb25zb2xlLmxvZygnUm91bmQgRmluaXNoZWQnKTtcclxuICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLScpO1xyXG4gICAgUk9VTkQrKztcclxuICAgIC8vY2hhbmdlcyB0dXJuc1xyXG4gICAgUDFfVFVSTiA9IDE7XHJcbiAgICBQMl9UVVJOID0gMDtcclxuXHJcblxyXG5cclxuICAgIC8vICAgcGxheU1vdmVBSShQMSwgUDIpO1xyXG4gICAgLy8gLy8gQWkncyBtb3ZlXHJcbiAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gfSwgMjAwMCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByYW5kb21CZXR3ZWVuKG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNodWZmbGVBcnJheShhcnJheSkge1xyXG4gICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTtcclxuICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcclxuICAgICAgYXJyYXlbal0gPSB0ZW1wO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG4gIH1cclxuXHJcblxyXG4gIC8vcGxheWVyIHBsYXlzIHRoZSBtb3ZlXHJcbiAgZnVuY3Rpb24gcGxheU1vdmVQbGF5ZXIoYXR0YWNrTW92ZSwgZGVmZW5jZU1vdmUsIGF0dGFja2VyLCBkZWZlbmRlcikge1xyXG5cclxuICAgIHZhciBhdHRhY2tNaW47XHJcbiAgICB2YXIgYXR0YWNrTWF4O1xyXG4gICAgdmFyIG1vdmVOYW1lO1xyXG4gICAgdmFyIGR1YlJhZ2VSZXF1aXJlZDtcclxuICAgIHZhciBkYW1hZ2U7XHJcblxyXG5cclxuXHJcblxyXG4gICAgaWYgKGF0dGFja01vdmUpIHtcclxuICAgICAgLy9zZXRzIHZhcmlhYmxlc1xyXG4gICAgICBhdHRhY2tNaW4gPSBhdHRhY2tlci5hdHRhY2tzW2F0dGFja01vdmVdLmF0dGFja1swXTtcclxuICAgICAgYXR0YWNrTWF4ID0gYXR0YWNrZXIuYXR0YWNrc1thdHRhY2tNb3ZlXS5hdHRhY2tbMV07XHJcbiAgICAgIGRhbWFnZSA9IHJhbmRvbUJldHdlZW4oYXR0YWNrTWluLCBhdHRhY2tNYXgpO1xyXG4gICAgICBtb3ZlTmFtZSA9IGF0dGFja2VyLmF0dGFja3NbYXR0YWNrTW92ZV0ubmFtZTtcclxuICAgICAgZHViUmFnZVJlcXVpcmVkID0gYXR0YWNrZXIuYXR0YWNrc1thdHRhY2tNb3ZlXS5kdWJSYWdlUmVxdWlyZWQ7XHJcbiAgICAgIC8vZG9lcyBkYW1hZ2VcclxuICAgICAgZGVmZW5kZXIuaGVhbHRoIC09IGRhbWFnZTtcclxuICAgICAgLy91c2VzIGR1YlJhZ2VcclxuICAgICAgYXR0YWNrZXIuZHViUmFnZSAtPSBkdWJSYWdlUmVxdWlyZWQ7XHJcbiAgICAgIC8vdGFrZXMgaGVhbHRoXHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwMV9oZWFsdGgnKS5pbm5lckhUTUwgPSBhdHRhY2tlci5oZWFsdGg7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwMl9oZWFsdGgnKS5pbm5lckhUTUwgPSBkZWZlbmRlci5oZWFsdGg7XHJcbiAgICAgIC8vbG9ncyBjaGFuZ2VzXHJcbiAgICAgIGNvbnNvbGUubG9nKGF0dGFja2VyLm5hbWUgKyAnIHVzZXMgJyArIG1vdmVOYW1lKTtcclxuICAgICAgY29uc29sZS5sb2coYXR0YWNrZXIubmFtZSArICcgZG9lcyAnICsgZGFtYWdlICsgJyBkYW1hZ2UgdG8gJyArIGRlZmVuZGVyLm5hbWUpO1xyXG4gICAgICBjb25zb2xlLmxvZyhkZWZlbmRlci5uYW1lICsgJyBoZWFsdGggaXMgbm93ICcgKyBkZWZlbmRlci5oZWFsdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkZWZlbmNlTW92ZSkge1xyXG4gICAgICBkYW1hZ2UgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vZW5kcyB0dXJuc1xyXG4gICAgY29uc29sZS5sb2coYXR0YWNrZXIubmFtZSArICcgdHVybiBvdmVyJyk7XHJcbiAgICBjb25zb2xlLmxvZygnJyk7XHJcbiAgICBpZiAoZGVmZW5kZXIuaGVhbHRoIDw9IDApIHtcclxuICAgICAgY29uc29sZS5sb2coZGVmZW5kZXIubmFtZSArICcgaXMgZGVhZCwgZ2FtZSBvdmVyLi4uICcgKyBhdHRhY2tlci5uYW1lICsgJyB3b24hJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICB9XHJcblxyXG4gIC8vQUkgcGxheXMgdGhlIG1vdmVcclxuICBmdW5jdGlvbiBwbGF5TW92ZUFJKFAxLCBQMikge1xyXG5cclxuICAgIC8vcGlja3MgcmFuZG9tIG1vdmVcclxuICAgIHZhciBteUFycmF5ID0gWydkZWZhdWx0QXR0YWNrJywgJ3NwZWNpYWwxJ107XHJcbiAgICB2YXIgYXR0YWNrVHlwZSA9IG15QXJyYXlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbXlBcnJheS5sZW5ndGgpXTtcclxuXHJcblxyXG4gICAgdmFyIGF0dGFja01pbjtcclxuICAgIHZhciBhdHRhY2tNYXg7XHJcbiAgICB2YXIgbW92ZU5hbWU7XHJcbiAgICB2YXIgZHViUmFnZVJlcXVpcmVkO1xyXG5cclxuICAgIHN3aXRjaCAoYXR0YWNrVHlwZSkge1xyXG4gICAgICBjYXNlICdkZWZhdWx0QXR0YWNrJzpcclxuICAgICAgICBkdWJSYWdlUmVxdWlyZWQgPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdzcGVjaWFsMSc6XHJcbiAgICAgICAgZHViUmFnZVJlcXVpcmVkID0gUDIuYXR0YWNrcy5zcGVjaWFsMS5kdWJSYWdlUmVxdWlyZWQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgLy9jaGVja3MgaWYgaGFzIGVub3VnaCBkdWJSYWdlIGZvciB0aGlzIGF0dGFjaywgaWYgbm90LCBwaWNrIHJhbmRvbSBkZWZhdWx0XHJcbiAgICBpZiAoUDIuZHViUmFnZSA8IGR1YlJhZ2VSZXF1aXJlZCkge1xyXG4gICAgICBteUFycmF5ID0gWydkZWZhdWx0QXR0YWNrJywgJ2RlZmF1bHRBdHRhY2snXTtcclxuICAgICAgYXR0YWNrVHlwZSA9IG15QXJyYXlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbXlBcnJheS5sZW5ndGgpXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy9jaGVja3Mgd2hpY2ggYXR0YWNrVHlwZSBoYXMgYmVlbiBwaWNrZWRcclxuICAgIHN3aXRjaCAoYXR0YWNrVHlwZSkge1xyXG4gICAgICBjYXNlICdkZWZhdWx0QXR0YWNrJzpcclxuICAgICAgICBhdHRhY2tNaW4gPSBQMi5hdHRhY2tzLmRlZmF1bHRBdHRhY2suYXR0YWNrWzBdO1xyXG4gICAgICAgIGF0dGFja01heCA9IFAyLmF0dGFja3MuZGVmYXVsdEF0dGFjay5hdHRhY2tbMV07XHJcbiAgICAgICAgbW92ZU5hbWUgPSBQMi5hdHRhY2tzLmRlZmF1bHRBdHRhY2submFtZSArIFwiIChTdGFuZGFyZClcIjtcclxuICAgICAgICBkdWJSYWdlUmVxdWlyZWQgPSBQMi5hdHRhY2tzLmRlZmF1bHRBdHRhY2suZHViUmFnZVJlcXVpcmVkO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdzcGVjaWFsMSc6XHJcbiAgICAgICAgYXR0YWNrTWluID0gUDIuYXR0YWNrcy5zcGVjaWFsMS5hdHRhY2tbMF07XHJcbiAgICAgICAgYXR0YWNrTWF4ID0gUDIuYXR0YWNrcy5zcGVjaWFsMS5hdHRhY2tbMV07XHJcbiAgICAgICAgbW92ZU5hbWUgPSBQMi5hdHRhY2tzLnNwZWNpYWwxLm5hbWUgKyBcIiAoU3BlY2lhbClcIjtcclxuICAgICAgICBkdWJSYWdlUmVxdWlyZWQgPSBQMi5hdHRhY2tzLnNwZWNpYWwxLmR1YlJhZ2VSZXF1aXJlZDtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICAvL3VzZXMgbW92ZVxyXG4gICAgdmFyIGRhbWFnZSA9IHJhbmRvbUJldHdlZW4oYXR0YWNrTWluLCBhdHRhY2tNYXgpO1xyXG4gICAgUDEuaGVhbHRoIC09IGRhbWFnZTtcclxuXHJcbiAgICAvL3VzZXMgRHViIHJhZ2VcclxuICAgIFAyLmR1YlJhZ2UgLT0gZHViUmFnZVJlcXVpcmVkO1xyXG5cclxuICAgIC8vbG9ncyBjaGFuZ2VzXHJcbiAgICBjb25zb2xlLmxvZyhQMi5uYW1lICsgJyB1c2VzICcgKyBtb3ZlTmFtZSk7XHJcbiAgICBjb25zb2xlLmxvZyhQMi5uYW1lICsgJyBkb2VzICcgKyBkYW1hZ2UgKyAnIGRhbWFnZSB0byAnICsgUDEubmFtZSk7XHJcbiAgICBjb25zb2xlLmxvZyhQMS5uYW1lICsgJyBoZWFsdGggaXMgbm93ICcgKyBQMS5oZWFsdGgpO1xyXG5cclxuICAgIC8vdGFrZXMgaGVhbHRoXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncDFfaGVhbHRoJykuaW5uZXJIVE1MID0gUDEuaGVhbHRoO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3AyX2hlYWx0aCcpLmlubmVySFRNTCA9IFAyLmhlYWx0aDtcclxuXHJcbiAgICAvL2VuZHMgdHVybnNcclxuICAgIGNvbnNvbGUubG9nKFAyLm5hbWUgKyAnIHR1cm4gb3ZlcicpO1xyXG5cclxuICAgIC8vY2hlY2tzIGlmIGhlYWx0aCA8IDBcclxuICAgIGlmIChQMS5oZWFsdGggPD0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhQMS5uYW1lICsgJyBpcyBkZWFkLCBnYW1lIG92ZXIuLi4gJyArIFAyLm5hbWUgKyAnIHdvbiEnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vY2xvc2VzIHRoZSBidW5kbGVcclxufSk7XHJcbiJdfQ==
