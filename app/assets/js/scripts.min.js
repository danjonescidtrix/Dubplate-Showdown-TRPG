/*!
 * Dubplate-Showdown-TRPG
 * 
 * 
 * @author Dan Jones
 * @version 1.0.5
 * Copyright 2017. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){"use strict";function e(e,t){console.log("Round: "+d),u=0,s=1,console.log(c),console.log(l),a(e,t,c,l);var i=["attackMove","defenceMove"],h=i[Math.floor(Math.random()*i.length)];switch(h){case"attackMove":var m=[];Object.keys(l.attacks).forEach(function(e,a){m.push(e)});for(var r=n(m),g=r.length,k=0;k<g;k++){var f=r[k];if(l.dubRage>=c.attacks[f].dubRageRequired){e=f,a(e,t,l,c);break}}break;case"defenceMove":console.log(l.name+" uses defence.")}c.dubRage+=20,l.dubRage+=20,console.log("Round Finished"),console.log("--------------"),o(),d++,u=1,s=0}function a(e,a,n,o){var c,l,d,u,s;e&&(c=n.attacks[e].attack[0],l=n.attacks[e].attack[1],s=t(c,l),d=n.attacks[e].name,u=n.attacks[e].dubRageRequired,o.health-=s,n.dubRage-=u,console.log(n.name+" uses "+d),console.log(n.name+" does "+s+" damage to "+o.name),console.log(o.name+" health is now "+o.health)),a&&(s=0),console.log(n.name+" turn over"),console.log(""),o.health<=0&&console.log(o.name+" is dead, game over... "+n.name+" won!")}function t(e,a){return Math.floor(Math.random()*(a-e+1)+e)}function n(e){for(var a=e.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),n=e[a];e[a]=e[t],e[t]=n}return e}function o(){document.getElementById("p1_health").innerHTML=c.health,document.getElementById("p2_health").innerHTML=l.health}var c,l,d=1,u=1,s=0,i={Simula:{name:"Simula",health:100,attacks:{defaultAttack:{name:"Standard Attack",attack:[10,14],dubRageRequired:0},special1:{name:"Nasssty frog synths",attack:[25,30],dubRageRequired:50}},dubRage:0},Noisia:{name:"Noisia",health:300,attacks:{defaultAttack:{name:"Standard Attack",attack:[10,14],dubRageRequired:0},special1:{name:"Diplodoucus",attack:[25,30],dubRageRequired:100}},dubRage:0}};c=i.Simula,l=i.Noisia,document.getElementById("p1_name").innerHTML=c.name,document.getElementById("p2_name").innerHTML=l.name,document.getElementById("p1_health").innerHTML=c.health,document.getElementById("p2_health").innerHTML=l.health,document.getElementById("defaultAttack").onclick=function(){1===u&&e("defaultAttack","")},document.getElementById("special1").onclick=function(){1===u&&(c.dubRage>=c.attacks.special1.dubRageRequired?e("special1",""):console.log("You dont have enough Dub Rage for this move."))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdFJvdW5kIiwiYXR0YWNrTW92ZSIsImRlZmVuY2VNb3ZlIiwiY29uc29sZSIsImxvZyIsIlJPVU5EIiwiUDFfVFVSTiIsIlAyX1RVUk4iLCJQMSIsIlAyIiwiaW5pdE1vdmUiLCJtb3ZlQXJyYXkiLCJtb3ZlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiYXR0YWNrQXJyYXkiLCJPYmplY3QiLCJrZXlzIiwiYXR0YWNrcyIsImZvckVhY2giLCJrZXkiLCJpbmRleCIsInB1c2giLCJzaHVmZmxlQXR0YWNrQXJyYXkiLCJzaHVmZmxlQXJyYXkiLCJhcnJheUxlbmd0aCIsImkiLCJ0aGlzRnJvbVNodWZmbGUiLCJkdWJSYWdlIiwiZHViUmFnZVJlcXVpcmVkIiwibmFtZSIsInVwZGF0ZUVsZW1zIiwiYXR0YWNrZXIiLCJkZWZlbmRlciIsImF0dGFja01pbiIsImF0dGFja01heCIsIm1vdmVOYW1lIiwiZGFtYWdlIiwiYXR0YWNrIiwicmFuZG9tQmV0d2VlbiIsImhlYWx0aCIsIm1pbiIsIm1heCIsImFycmF5IiwiaiIsInRlbXAiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImNoYXJhY3RlcnMiLCJTaW11bGEiLCJkZWZhdWx0QXR0YWNrIiwic3BlY2lhbDEiLCJOb2lzaWEiLCJvbmNsaWNrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBQSxTQUFBQyxpQkFBQSxtQkFBQSxXQUVBLFlBK0VBLFNBQUFDLEdBQUFDLEVBQUFDLEdBR0FDLFFBQUFDLElBQUEsVUFBQUMsR0FDQUMsRUFBQSxFQUNBQyxFQUFBLEVBQ0FKLFFBQUFDLElBQUFJLEdBQ0FMLFFBQUFDLElBQUFLLEdBR0FDLEVBQUFULEVBQUFDLEVBQUFNLEVBQUFDLEVBR0EsSUFBQUUsSUFBQSxhQUFBLGVBQ0FDLEVBQUFELEVBQUFFLEtBQUFDLE1BQUFELEtBQUFFLFNBQUFK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d0IsS0FDQWxDLFNBQUFrRCxlQUFBLFdBQUFDLFVBQUF4QyxFQUFBdUIsS0FDQWxDLFNBQUFrRCxlQUFBLGFBQUFDLFVBQUF6QyxFQUFBa0MsT0FDQTVDLFNBQUFrRCxlQUFBLGFBQUFDLFVBQUF4QyxFQUFBaUMsT0FFQTVDLFNBQUFrRCxlQUFBLGlCQUFBTyxRQUFBLFdBQ0EsSUFBQWpELEdBQ0FOLEVBQUEsZ0JBQUEsS0FJQUYsU0FBQWtELGVBQUEsWUFBQU8sUUFBQSxXQUNBLElBQUFqRCxJQUNBRSxFQUFBc0IsU0FBQXRCLEVBQUFZLFFBQUFpQyxTQUFBdEIsZ0JBQ0EvQixFQUFBLFdBQUEsSUFFQUcsUUFBQUMsSUFBQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vb3BlbnMgdGhlIGJ1bmRsZVxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcblxyXG4gIC8vLS0tLSBHTE9CQUxTIC0tLS1cclxuICB2YXIgUk9VTkQgPSAxO1xyXG4gIHZhciBQMTtcclxuICB2YXIgUDFfVFVSTiA9IDE7XHJcbiAgdmFyIFAyO1xyXG4gIHZhciBQMl9UVVJOID0gMDtcclxuXHJcbiAgdmFyIGNoYXJhY3RlcnMgPSB7XHJcbiAgICBTaW11bGE6IHtcclxuICAgICAgbmFtZTogJ1NpbXVsYScsXHJcbiAgICAgIGhlYWx0aDogMTAwLFxyXG4gICAgICBhdHRhY2tzOiB7XHJcbiAgICAgICAgZGVmYXVsdEF0dGFjazoge1xyXG4gICAgICAgICAgbmFtZTogJ1N0YW5kYXJkIEF0dGFjaycsXHJcbiAgICAgICAgICBhdHRhY2s6IFtcclxuICAgICAgICAgICAgMTAsIDE0XHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgZHViUmFnZVJlcXVpcmVkOiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcGVjaWFsMToge1xyXG4gICAgICAgICAgbmFtZTogJ05hc3NzdHkgZnJvZyBzeW50aHMnLFxyXG4gICAgICAgICAgYXR0YWNrOiBbXHJcbiAgICAgICAgICAgIDI1LCAzMFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGR1YlJhZ2VSZXF1aXJlZDogNTBcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGR1YlJhZ2U6IDAsXHJcbiAgICB9LFxyXG4gICAgTm9pc2lhOiB7XHJcbiAgICAgIG5hbWU6ICdOb2lzaWEnLFxyXG4gICAgICBoZWFsdGg6IDMwMCxcclxuICAgICAgYXR0YWNrczoge1xyXG4gICAgICAgIGRlZmF1bHRBdHRhY2s6IHtcclxuICAgICAgICAgIG5hbWU6ICdTdGFuZGFyZCBBdHRhY2snLFxyXG4gICAgICAgICAgYXR0YWNrOiBbXHJcbiAgICAgICAgICAgIDEwLCAxNFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGR1YlJhZ2VSZXF1aXJlZDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3BlY2lhbDE6IHtcclxuICAgICAgICAgIG5hbWU6ICdEaXBsb2RvdWN1cycsXHJcbiAgICAgICAgICBhdHRhY2s6IFtcclxuICAgICAgICAgICAgMjUsIDMwXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgZHViUmFnZVJlcXVpcmVkOiAxMDBcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGR1YlJhZ2U6IDAsXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgUDEgPSBjaGFyYWN0ZXJzLlNpbXVsYTtcclxuICBQMiA9IGNoYXJhY3RlcnMuTm9pc2lhO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncDFfbmFtZScpLmlubmVySFRNTCA9IFAxLm5hbWU7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3AyX25hbWUnKS5pbm5lckhUTUwgPSBQMi5uYW1lO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwMV9oZWFsdGgnKS5pbm5lckhUTUwgPSBQMS5oZWFsdGg7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3AyX2hlYWx0aCcpLmlubmVySFRNTCA9IFAyLmhlYWx0aDtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlZmF1bHRBdHRhY2snKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoUDFfVFVSTiA9PT0gMSkge1xyXG4gICAgICBpbml0Um91bmQoJ2RlZmF1bHRBdHRhY2snLCAnJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpYWwxJykub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKFAxX1RVUk4gPT09IDEpIHtcclxuICAgICAgaWYgKFAxLmR1YlJhZ2UgPj0gUDEuYXR0YWNrcy5zcGVjaWFsMS5kdWJSYWdlUmVxdWlyZWQpIHtcclxuICAgICAgICBpbml0Um91bmQoJ3NwZWNpYWwxJywgJycpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdZb3UgZG9udCBoYXZlIGVub3VnaCBEdWIgUmFnZSBmb3IgdGhpcyBtb3ZlLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gaW5pdFJvdW5kKGF0dGFja01vdmUsIGRlZmVuY2VNb3ZlKSB7XHJcblxyXG4gICAgLy9pbml0IHJvdW5kXHJcbiAgICBjb25zb2xlLmxvZygnUm91bmQ6ICcgKyBST1VORCk7XHJcbiAgICBQMV9UVVJOID0gMDtcclxuICAgIFAyX1RVUk4gPSAxO1xyXG4gICAgY29uc29sZS5sb2coUDEpO1xyXG4gICAgY29uc29sZS5sb2coUDIpO1xyXG5cclxuICAgIC8vcGxheWVycyBtb3ZlXHJcbiAgICBpbml0TW92ZShhdHRhY2tNb3ZlLCBkZWZlbmNlTW92ZSwgUDEsIFAyKTtcclxuXHJcbiAgICAvL2JvdCdzIG1vdmVcclxuICAgIHZhciBtb3ZlQXJyYXkgPSBbJ2F0dGFja01vdmUnLCAnZGVmZW5jZU1vdmUnXTtcclxuICAgIHZhciBtb3ZlID0gbW92ZUFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1vdmVBcnJheS5sZW5ndGgpXTtcclxuXHJcbiAgICBzd2l0Y2ggKG1vdmUpIHtcclxuICAgICAgY2FzZSAnYXR0YWNrTW92ZSc6XHJcbiAgICAgICAgdmFyIGF0dGFja0FycmF5ID0gW107XHJcbiAgICAgICAgT2JqZWN0LmtleXMoUDIuYXR0YWNrcykuZm9yRWFjaChmdW5jdGlvbihrZXksIGluZGV4KSB7XHJcbiAgICAgICAgICBhdHRhY2tBcnJheS5wdXNoKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9yYW5kb21pemUgYXR0YWNrQXJyYXkgdG8gbmV3IGFycmFjeVxyXG4gICAgICAgIHZhciBzaHVmZmxlQXR0YWNrQXJyYXkgPSBzaHVmZmxlQXJyYXkoYXR0YWNrQXJyYXkpO1xyXG4gICAgICAgIHZhciBhcnJheUxlbmd0aCA9IHNodWZmbGVBdHRhY2tBcnJheS5sZW5ndGg7XHJcbiAgICAgICAgLy9sb29wIGFycmF5LCBjaGVjayBkdWJyZXF1aXJlZCB2cyBQMiBkdWJSYWdlXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgdGhpc0Zyb21TaHVmZmxlID0gc2h1ZmZsZUF0dGFja0FycmF5W2ldO1xyXG4gICAgICAgICAgLy9pZiBhdHRhY2sncyBkdWIgcmFnZSBhdmFpbGFibGUsIHVzZSB0aGlzIGF0YWNrLCBlbHNlIGtlZXAgbG9vcGluZ1xyXG4gICAgICAgICAgaWYgKFAyLmR1YlJhZ2UgPj0gUDEuYXR0YWNrc1t0aGlzRnJvbVNodWZmbGVdLmR1YlJhZ2VSZXF1aXJlZCkge1xyXG4gICAgICAgICAgICBhdHRhY2tNb3ZlID0gdGhpc0Zyb21TaHVmZmxlO1xyXG4gICAgICAgICAgICBpbml0TW92ZShhdHRhY2tNb3ZlLCBkZWZlbmNlTW92ZSwgUDIsIFAxKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkZWZlbmNlTW92ZSc6XHJcbiAgICAgICAgY29uc29sZS5sb2coUDIubmFtZSArIFwiIHVzZXMgZGVmZW5jZS5cIik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgUDEuZHViUmFnZSArPSAyMDtcclxuICAgIFAyLmR1YlJhZ2UgKz0gMjA7XHJcbiAgICBjb25zb2xlLmxvZygnUm91bmQgRmluaXNoZWQnKTtcclxuICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLScpO1xyXG4gICAgdXBkYXRlRWxlbXMoKTtcclxuICAgIFJPVU5EKys7XHJcbiAgICAvL2NoYW5nZXMgdHVybnNcclxuICAgIFAxX1RVUk4gPSAxO1xyXG4gICAgUDJfVFVSTiA9IDA7XHJcblxyXG4gIH1cclxuXHJcbiAgLy9wbGF5cyB0aGUgbW92ZVxyXG4gIGZ1bmN0aW9uIGluaXRNb3ZlKGF0dGFja01vdmUsIGRlZmVuY2VNb3ZlLCBhdHRhY2tlciwgZGVmZW5kZXIpIHtcclxuXHJcbiAgICB2YXIgYXR0YWNrTWluO1xyXG4gICAgdmFyIGF0dGFja01heDtcclxuICAgIHZhciBtb3ZlTmFtZTtcclxuICAgIHZhciBkdWJSYWdlUmVxdWlyZWQ7XHJcbiAgICB2YXIgZGFtYWdlO1xyXG5cclxuICAgIGlmIChhdHRhY2tNb3ZlKSB7XHJcbiAgICAgIC8vc2V0cyB2YXJpYWJsZXNcclxuICAgICAgYXR0YWNrTWluID0gYXR0YWNrZXIuYXR0YWNrc1thdHRhY2tNb3ZlXS5hdHRhY2tbMF07XHJcbiAgICAgIGF0dGFja01heCA9IGF0dGFja2VyLmF0dGFja3NbYXR0YWNrTW92ZV0uYXR0YWNrWzFdO1xyXG4gICAgICBkYW1hZ2UgPSByYW5kb21CZXR3ZWVuKGF0dGFja01pbiwgYXR0YWNrTWF4KTtcclxuICAgICAgbW92ZU5hbWUgPSBhdHRhY2tlci5hdHRhY2tzW2F0dGFja01vdmVdLm5hbWU7XHJcbiAgICAgIGR1YlJhZ2VSZXF1aXJlZCA9IGF0dGFja2VyLmF0dGFja3NbYXR0YWNrTW92ZV0uZHViUmFnZVJlcXVpcmVkO1xyXG4gICAgICAvL2RvZXMgZGFtYWdlXHJcbiAgICAgIGRlZmVuZGVyLmhlYWx0aCAtPSBkYW1hZ2U7XHJcbiAgICAgIC8vdXNlcyBkdWJSYWdlXHJcbiAgICAgIGF0dGFja2VyLmR1YlJhZ2UgLT0gZHViUmFnZVJlcXVpcmVkO1xyXG5cclxuICAgICAgLy9sb2dzIGNoYW5nZXNcclxuICAgICAgY29uc29sZS5sb2coYXR0YWNrZXIubmFtZSArICcgdXNlcyAnICsgbW92ZU5hbWUpO1xyXG4gICAgICBjb25zb2xlLmxvZyhhdHRhY2tlci5uYW1lICsgJyBkb2VzICcgKyBkYW1hZ2UgKyAnIGRhbWFnZSB0byAnICsgZGVmZW5kZXIubmFtZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRlZmVuZGVyLm5hbWUgKyAnIGhlYWx0aCBpcyBub3cgJyArIGRlZmVuZGVyLmhlYWx0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlZmVuY2VNb3ZlKSB7XHJcbiAgICAgIGRhbWFnZSA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy9lbmRzIHR1cm5zXHJcbiAgICBjb25zb2xlLmxvZyhhdHRhY2tlci5uYW1lICsgJyB0dXJuIG92ZXInKTtcclxuICAgIGNvbnNvbGUubG9nKCcnKTtcclxuICAgIGlmIChkZWZlbmRlci5oZWFsdGggPD0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhkZWZlbmRlci5uYW1lICsgJyBpcyBkZWFkLCBnYW1lIG92ZXIuLi4gJyArIGF0dGFja2VyLm5hbWUgKyAnIHdvbiEnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJhbmRvbUJldHdlZW4obWluLCBtYXgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2h1ZmZsZUFycmF5KGFycmF5KSB7XHJcbiAgICBmb3IgKHZhciBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG4gICAgICB2YXIgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICB2YXIgdGVtcCA9IGFycmF5W2ldO1xyXG4gICAgICBhcnJheVtpXSA9IGFycmF5W2pdO1xyXG4gICAgICBhcnJheVtqXSA9IHRlbXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVFbGVtcygpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwMV9oZWFsdGgnKS5pbm5lckhUTUwgPSBQMS5oZWFsdGg7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncDJfaGVhbHRoJykuaW5uZXJIVE1MID0gUDIuaGVhbHRoO1xyXG4gIH1cclxuXHJcbiAgLy9jbG9zZXMgdGhlIGJ1bmRsZVxyXG59KTtcclxuIl19
